---
import { getCollection } from "astro:content";
import FeaturedPostCard from "./FeaturedPostCard.astro";
import FeaturedPostSmallCard from "./FeaturedPostSmallCard.astro";

const allPosts = await getCollection("posts");

const latestPosts = allPosts
  .filter((post) => post.data.featured === true)
  .sort(
    (a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
  )
  .slice(0, 4);
---

<section class="py-16 bg-gradient-to-br from-blue-50 to-white">
  <div class="container mx-auto px-4">
    <div class="flex justify-between items-center mb-12">
      <h2
        class="text-2xl md:text-3xl font-bold font-title tracking-tight text-tech-dark"
      >
        <span class="border-b-2 border-cheese-accent pb-2">最新文章</span>
      </h2>
      <a
        href="/blog"
        class="text-base font-medium text-cheese-accent flex items-center group"
      >
        全部文章 <i
          class="fas fa-arrow-right ml-2 group-hover:translate-x-1 transition-transform"
        ></i>
      </a>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
      <!-- 特色博客卡片 -->
      <FeaturedPostCard post={latestPosts[0]} />
      <div>
        <!-- 博客列表 -->
        {
          latestPosts
            .slice(1)
            .map((post) => <FeaturedPostSmallCard post={post} />)
        }
      </div>
    </div>
  </div>
</section>
