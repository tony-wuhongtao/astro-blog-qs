---
const path = Astro.url.pathname;
---

<nav
  class="bg-white/80 backdrop-blur-md py-4 z-50 border-b border-tech-light shadow-sm"
  data-navbar
>
  <div class="container mx-auto px-4 flex justify-between items-center">
    <div class="flex items-center">
      <div
        class="w-10 h-10 rounded-full overflow-hidden border-2 border-tech-light"
      >
        <!-- 替换为起司猫咪的头像 -->
        <img src="/images/qs-avatar.jpg" alt="avatar" />
      </div>
      <a
        href="/"
        class="ml-3 font-title text-xl font-bold tracking-tight text-tech-dark"
        >爱学习的起司</a
      >
    </div>

    <!-- 桌面端导航 -->
    <div class="hidden md:flex space-x-8">
      <a
        href="/"
        class={`text-base font-medium pb-1 transition-colors ${path === "/" ? "border-b-2 border-cheese-accent text-cheese-accent" : "border-b-2 border-transparent text-tech-dark hover:text-cheese-accent"}`}
        >首页</a
      >
      <a
        href="/blog"
        class={`text-base font-medium pb-1 transition-colors ${path.includes("/blog") ? "border-b-2 border-cheese-accent text-cheese-accent" : "border-b-2 border-transparent text-tech-dark hover:text-cheese-accent"}`}
        >博客</a
      >
      <a
        href="/about"
        class={`text-base font-medium pb-1 transition-colors ${path === "/about" ? "border-b-2 border-cheese-accent text-cheese-accent" : "border-b-2 border-transparent text-tech-dark hover:text-cheese-accent"}`}
        >关于</a
      >
    </div>

    <!-- 移动端菜单按钮 -->
    <div class="flex items-center space-x-4">
      <button class="md:hidden text-tech-dark" id="mobile-menu-button">
        <i class="fas fa-bars text-xl"></i>
      </button>
    </div>
  </div>

  <!-- 移动端导航菜单 -->
  <div class="md:hidden container mx-auto px-4 py-2 transition-all duration-300 ease-in-out hidden" id="mobile-menu">
    <div class="flex flex-col space-y-3 pt-2 pb-4">
      <a
        href="/"
        class={`text-base font-medium py-2 transition-colors ${path === "/" ? "border-l-4 border-cheese-accent text-cheese-accent pl-4" : "border-l-4 border-transparent text-tech-dark hover:text-cheese-accent pl-4"}`}
        >首页</a
      >
      <a
        href="/blog"
        class={`text-base font-medium py-2 transition-colors ${path.includes("/blog") ? "border-l-4 border-cheese-accent text-cheese-accent pl-4" : "border-l-4 border-transparent text-tech-dark hover:text-cheese-accent pl-4"}`}
        >博客</a
      >
      <a
        href="/about"
        class={`text-base font-medium py-2 transition-colors ${path === "/about" ? "border-l-4 border-cheese-accent text-cheese-accent pl-4" : "border-l-4 border-transparent text-tech-dark hover:text-cheese-accent pl-4"}`}
        >关于</a
      >
    </div>
  </div>

  <script is:client>
    const menuButton = document.getElementById('mobile-menu-button');
    const menu = document.getElementById('mobile-menu');
    
    menuButton.addEventListener('click', () => {
      menu.classList.toggle('hidden');
    });
  </script>
</nav>
